@model IEnumerable<Motax.ViewModels.CarVM>

@{
    var successMessage = TempData["success"] as string;
    var errorMessage = TempData["error"] as string;
}
<style>
    .car-btns {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

        .car-btns .btn {
            background-color: #ff0000; /* Màu nền đỏ */
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s;
            text-decoration: none; /* Loại bỏ gạch chân */
        }

            .car-btns .btn i {
                font-size: 15px;
                color: #ffffff; /* Màu trắng cho icon */
            }

            .car-btns .btn:hover {
                background-color: #d9534f; /* Màu khi hover */
            }

        .car-btns a {
            text-decoration: none; /* Loại bỏ gạch chân cho các liên kết */
        }

    .car-rate .fas {
        color: #f39c12; /* Yellow color for filled stars */
    }

    .car-rate .far {
        color: #ccc; /* Grey color for empty stars */
    }
</style>


@if (!string.IsNullOrEmpty(successMessage))
{
    <div class="alert alert-success">@Html.Raw(successMessage)</div>
}

@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger">@Html.Raw(errorMessage)</div>
}

@foreach (var item in Model)
{
    <div class="col-md-6 col-lg-4">
        <div class="car-item">
            <div class="car-img">
                @if (item.Condition == "New")
                {
                    <span class="car-status status-2">@item.Condition</span>
                }
                else
                {
                    <span class="car-status status-1">@item.Condition</span>
                }
                <a asp-action="Detail" asp-controller="Car" asp-route-id="@item.Id">
                    <img src="~/Images/Car/Single/@item.ImageSingle" alt="@item.Name">
                </a>
                <div class="car-btns">
                    <form asp-action="AddToWishlist" asp-controller="Car" method="post" class="d-inline">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="carId" value="@item.Id" />
                        <button type="submit" class="btn btn-link p-0">
                            <i class="far fa-heart"></i>
                        </button>
                    </form>
                    <form asp-action="AddToCompare" asp-controller="Car" method="post" class="d-inline">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="carId" value="@item.Id" />
                        <button type="submit" class="btn btn-link p-0">
                            <i class="far fa-arrows-repeat"></i>
                        </button>
                    </form>
                </div>
            </div>
            <div class="car-content">
                <div class="car-top">
                    <h4><a asp-action="Detail" asp-controller="Car" asp-route-id="@item.Id">@item.Name</a></h4>
                    <div class="car-rate">
                        @for (int i = 1; i <= 5; i++)
                        {
                            if (i <= Math.Ceiling(item.AverageRating))
                            {
                                <i class="fas fa-star"></i>
                            }
                            else
                            {
                                <i class="far fa-star"></i>
                            }
                        }
                        <span>@item.AverageRating.ToString("0.0") (@item.ReviewCount Reviews)</span>
                    </div>
                </div>
                <ul class="car-list">
                    <li><i class="far fa-steering-wheel"></i>@item.Transmission</li>
                    <li><i class="far fa-road"></i>@item.Mileage</li>
                    <li><i class="far fa-car"></i>Model: @item.Year</li>
                    <li><i class="far fa-gas-pump"></i>@item.FuelType</li>
                </ul>
                <div class="car-footer">
                    <span class="car-price">$@item.Price</span>
                    <a asp-action="Detail" asp-controller="Car" asp-route-id="@item.Id" class="theme-btn"><span class="far fa-eye"></span>Details</a>
                </div>
            </div>
        </div>
    </div>
}

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
